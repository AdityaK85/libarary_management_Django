{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no"
      name="viewport"
    />
    <title>User Data</title>
    <!-- General CSS Files -->
    <link rel="stylesheet" href="{% static 'assets/css/app.min.css' %}" />
    <link
      rel="stylesheet"
      href="{% static 'assets/bundles/datatables/datatables.min.css' %}"
    />
    <link
      rel="stylesheet"
      href="{% static 'assets/bundles/datatables/DataTables-1.10.16/css/dataTables.bootstrap4.min.css' %}"
    />
    <!-- Template CSS -->
    <link rel="stylesheet" href="{% static 'assets/css/style.css' %}" />
    <link rel="stylesheet" href="{% static 'assets/css/components.css' %}" />
    <!-- Custom style CSS -->
    <link rel="stylesheet" href="{% static 'assets/css/custom.css' %}" />
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="{% static 'assets/img/favicon.ico' %}"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

    <link
      href="{% static 'assets/select2.min.css' %}"
      rel="stylesheet"
      type="text/css"
    />
    <script src="{% static 'assets/select2.min.js' %}"></script>

    <script
      src="http://cdn.datatables.net/plug-ins/1.10.11/sorting/date-eu.js"
      type="text/javascript"
    ></script>
    <script
      type="text/javascript"
      charset="utf8"
      src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.js"
    ></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.1/css/select2.min.css" />
<!--  -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.1/js/select2.min.js"></script>

    <style>
      td {
        font-size: 14px;
      }
    </style>
  </head>
  <body>
    <div class="loader" id="loading"></div>
    <div id="app">
      <div class="main-wrapper main-wrapper-1">
        <div class="navbar-bg"></div>
        <nav class="navbar navbar-expand-lg main-navbar sticky">
          <div class="form-inline mr-auto">
            <div style="color: black; border-rounded: 10px">
            </div>
          </div>

          <ul class="navbar-nav mr-3">
            <li>
              <a
                href="#"
                data-toggle="sidebar"
                class="nav-link nav-link-lg collapse-btn"
              >
                <i data-feather="align-justify"></i
              ></a>
            </li>
          </ul>

          <ul class="navbar-nav navbar-right">
        
            </li>

            <li class="dropdown">
              <a
                href="#"
                data-toggle="dropdown"
                class="nav-link dropdown-toggle nav-link-lg nav-link-user"
              >
                <button type="button" class="btn btn-warning btn-sm pull-right">
                  Logout
                </button>
                <span class="d-sm-none d-lg-inline-block"></span
              ></a>
              <div class="dropdown-menu dropdown-menu-right pullDown">
                <div class="dropdown-title">Are you sure to logout ?</div>
                <div class="dropdown-divider"></div>
                <a href="/logout/" class="dropdown-item has-icon text-danger">
                  <i class="fas fa-sign-out-alt"></i>
                  Logout
                </a>
              </div>
            </li>
          </ul>
        </nav>
        <div class="main-sidebar sidebar-style-2">
          <aside id="sidebar-wrapper">
            <div class="sidebar-brand">
              <span class="logo-name" style="font-size: 18px"
                ><b>LIBRARY</b></span
              >
            </div>

            <ul class="sidebar-menu  my-5">
              <li class="" id="dashboard_page">
                <a href="/dashboard/"
                  ><i data-feather="monitor"></i><span>Dashboard</span></a
                >
              </li>

              <li class="" id="employee_view">
                <a href="/employee_view/"
                  ><i data-feather="users"></i><span>Employee Master</span></a
                >
              </li>

              <li class="" id="book_master">
                <a href="/book_master/"
                  ><i data-feather="home"></i><span>Book Master</span></a
                >
              </li>

              <li class="" id="book_issue">
                <a href="/book_issue_report/"
                  ><i data-feather="copy"></i><span>Book Request</span></a
                >
              </li>

              <li class="" id="book_count">
                <a href="/book_count/"
                  ><i data-feather="copy"></i
                  ><span>Total Available Books</span></a
                >
              </li>

              <li class="" id="book_category">
                <a href="/book_category/"
                  ><i data-feather="copy"></i><span>Book Category</span></a
                >
              </li>

              <li class="" id="book_rent">
                <a href="/book_rent/"
                  ><i data-feather="list"></i><span>Book Rent </span></a
                >
              </li>
            </ul>
          </aside>
        </div>

        <!-- Modal -->
        <div
          class="modal fade"
          id="change_password"
          tabindex="-1"
          role="dialog"
          aria-labelledby="formModal"
          aria-hidden="true"
        >
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="formModal">Change Password</h5>
                <button
                  type="button"
                  class="close"
                  data-dismiss="modal"
                  aria-label="Close"
                >
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <form class="">
                  <div class="form-group">
                    <label>Old Password</label>
                    <div class="input-group">
                      <div class="input-group-prepend">
                        <div class="input-group-text">
                          <i class="fas fa-cog"></i>
                        </div>
                      </div>

                      <input
                        type="password"
                        class="form-control"
                        placeholder="Old Password"
                        id="old_password"
                      />
                    </div>
                  </div>

                  <div class="form-group">
                    <label>New Password</label>
                    <div class="input-group">
                      <div class="input-group-prepend">
                        <div class="input-group-text">
                          <i class="fas fa-cog"></i>
                        </div>
                      </div>

                      <input
                        type="password"
                        class="form-control"
                        placeholder="New Password"
                        id="new_password"
                      />
                    </div>
                  </div>

                  <button
                    type="button"
                    onclick="update_password()"
                    class="btn btn-primary m-t-15 waves-effect"
                  >
                    Save
                  </button>
                </form>
              </div>
            </div>
          </div>
        </div>
        <script>
          function update_password() {
            var old_password = $("#old_password").val();
            var new_password = $("#new_password").val();

            if (old_password == "") {
              swal("Please enter old password", {
                icon: "info",
                button: "Ok",
                closeOnClickOutside: false,
              }).then(function () {});
            } else if (new_password == "") {
              swal("Please enter new password", {
                icon: "info",
                button: "Ok",
                closeOnClickOutside: false,
              }).then(function () {});
            } else {
              $.ajax({
                method: "POST",
                url: "/update_admin_password/",
                data: {
                  old_password: old_password,
                  new_password: new_password,
                },
                success: function (response) {
                  if (response == "success") {
                    $("#change_password").modal("hide");
                    swal("Password updated successfully", {
                      icon: "success",
                      button: "Ok",
                      closeOnClickOutside: false,
                    }).then(function () {
                      location.reload();
                    });
                  } else {
                    swal("Incorrect old password", {
                      icon: "info",
                      button: "Ok",
                      closeOnClickOutside: false,
                    }).then(function () {});
                  }
                },
              });
            }
          }
        </script>
      </div>
    </div>
  </body>
</html>
